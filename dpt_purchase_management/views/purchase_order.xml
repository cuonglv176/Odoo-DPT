<?xml version="1.0" encoding="UTF-8" ?>
<odoo>

    <record id="purchase_order_view_tree_inherit" model="ir.ui.view">
        <field name="name">purchase.order.tree.inherit</field>
        <field name="model">purchase.order</field>
        <field name="inherit_id" ref="purchase.purchase_order_view_tree"/>
        <field name="arch" type="xml">
            <field name="invoice_status" position="before">
                <field name="purchase_type" optional="show" widget="badge"
                       decoration-success="purchase_type == 'internal'"
                       decoration-info="purchase_type == 'external'"
                />
            </field>
        </field>
    </record>

    <record id="purchase_order_form_package_line_inherit_form" model="ir.ui.view">
        <field name="name">purchase_order_form_package_line_inherit_form</field>
        <field name="model">purchase.order</field>
        <field name="inherit_id" ref="purchase.purchase_order_form"/>
        <field name="arch" type="xml">
            <field name="partner_id" position="before">
                <field name="purchase_type" widget="radio" options="{'horizontal': true}"/>
                <field name="packing_lot_name" readonly="1" force_save="1"/>
                <field name="last_packing_lot_alphabet" invisible="1"/>
            </field>
            <field name="date_order" position="before">
                <field name="sale_id" readonly="1" force_save="1" invisible="sale_id"/>
            </field>
            <page name="products" position="after">
                <page string="Package" name="package">
                    <field name="import_package_stock" invisible="1"/>
                    <field name="package_line_ids" readonly="state in ('done', 'cancel')">
                        <tree>
                            <field name="purchase_id" column_invisible="1"/>
                            <!--                            <field name="lot_name"/>-->
                            <field name="quantity"/>
                            <field name="uom_id"/>
                            <field name="size"/>
                            <field name="weight"/>
                            <field name="volume"/>
                            <field name="note"/>
                        </tree>
                        <form>
                            <sheet>
                                <group>
                                    <group>
                                        <field name="purchase_id" invisible="1" force_save="1"/>
                                        <!--                                        <field name="lot_name"/>-->
                                        <field name="quantity"/>
                                        <field name="uom_id"/>
                                        <field name="note"/>
                                    </group>
                                    <group>
                                        <field name="size"/>
                                        <field name="weight"/>
                                        <field name="volume"/>
                                    </group>
                                </group>
                                <notebook>
                                    <page name="detail" string="Detail">
                                        <field name="detail_ids">
                                            <tree editable="bottom">
                                                <field name="package_id" column_invisible="1"/>
                                                <field name="product_id"/>
                                                <field name="uom_id" readonly="1" force_save="1"/>
                                                <field name="quantity"/>
                                            </tree>
                                        </field>
                                    </page>
                                </notebook>
                            </sheet>
                        </form>
                    </field>
                </page>

            </page>
            <xpath expr="//field[@name='order_line']/tree/field[@name='product_qty']" position="after">
                <field name="buying_url"/>
            </xpath>
            <xpath expr="//field[@name='order_line']/tree/field[@name='qty_received']" position="attributes">
                <attribute name="column_invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='order_line']/tree/field[@name='qty_received']" position="after">
                <field name="cost"/>
            </xpath>
            <xpath expr="//field[@name='order_line']/tree/field[@name='qty_invoiced']" position="attributes">
                <attribute name="column_invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='order_line']/tree/field[@name='taxes_id']" position="attributes">
                <attribute name="column_invisible">1</attribute>
            </xpath>
            <xpath expr="//group[hasclass('oe_subtotal_footer')]" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='order_line']/tree/field[@name='price_subtotal']" position="attributes">
                <attribute name="sum">Sum Price Subtotal</attribute>
            </xpath>
        </field>
    </record>

</odoo>