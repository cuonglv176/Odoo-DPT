<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Import Wizard Form View -->
    <record id="view_bank_transaction_import_wizard_form" model="ir.ui.view">
        <field name="name">dpt.bank.transaction.import.wizard.form</field>
        <field name="model">dpt.bank.transaction.import.wizard</field>
        <field name="arch" type="xml">
            <form string="Import Giao D·ªãch Ng√¢n H√†ng">
                <header>
                    <button name="action_download_template" string="T·∫£i Template" type="object"
                            class="btn-secondary" icon="fa-download"/>
                    <button name="action_preview_data" string="Xem Tr∆∞·ªõc" type="object"
                            class="btn-primary" invisible="import_status == 'done'"/>
                    <button name="action_import_transactions" string="Th·ª±c Hi·ªán Import" type="object"
                            class="btn-success" invisible="import_status != 'preview'"/>
                    <field name="import_status" widget="statusbar" statusbar_visible="draft,preview,done"/>
                </header>

                <sheet>
                    <div class="oe_title">
                        <h1>
                            <field name="name"/>
                        </h1>
                    </div>

                    <!-- File Upload Section -->
                    <group string="üìÅ Upload File Excel">
                        <group>
                            <field name="excel_file" filename="filename"/>
                            <field name="filename" invisible="1"/>
                            <field name="account_id" options="{'no_create': True}"/>
                        </group>
                    </group>

                    <!-- Configuration Section -->
                    <group string="‚öôÔ∏è C·∫•u H√¨nh C·ªôt D·ªØ Li·ªáu">
                        <group>
                            <field name="date_column"/>
                            <field name="description_column"/>
                            <field name="amount_column"/>
                        </group>
                        <group>
                            <field name="reference_column"/>
                            <field name="balance_column"/>
                            <field name="start_row"/>
                            <field name="date_format"/>
                        </group>
                    </group>

                    <!-- Preview Section -->
                    <group string="üëÅÔ∏è Xem Tr∆∞·ªõc D·ªØ Li·ªáu" invisible="not preview_data">
                        <field name="preview_data" nolabel="1" readonly="1"
                               widget="text" style="font-family: monospace; white-space: pre;"/>
                    </group>

                    <!-- Results Section -->
                    <group string="üìä K·∫øt Qu·∫£ Import" invisible="import_status not in ['done', 'error']">
                        <group>
                            <field name="total_rows" readonly="1"/>
                            <field name="success_count" readonly="1"/>
                        </group>
                        <group>
                            <field name="error_count" readonly="1"/>
                        </group>
                        <field name="error_log" nolabel="1" readonly="1"
                               invisible="not error_log"
                               widget="text" style="color: red; font-family: monospace;"/>
                    </group>

                    <!-- Help Section -->
                    <div class="alert alert-info" role="alert">
                        <h5><i class="fa fa-info-circle"/> H∆∞·ªõng D·∫´n S·ª≠ D·ª•ng</h5>
                        <ul>
                            <li><strong>B∆∞·ªõc 1:</strong> T·∫£i template Excel m·∫´u ƒë·ªÉ tham kh·∫£o ƒë·ªãnh d·∫°ng</li>
                            <li><strong>B∆∞·ªõc 2:</strong> Chu·∫©n b·ªã file Excel v·ªõi d·ªØ li·ªáu giao d·ªãch</li>
                            <li><strong>B∆∞·ªõc 3:</strong> C·∫•u h√¨nh ƒë√∫ng s·ªë th·ª© t·ª± c·ªôt trong file Excel</li>
                            <li><strong>B∆∞·ªõc 4:</strong> Xem tr∆∞·ªõc d·ªØ li·ªáu ƒë·ªÉ ki·ªÉm tra</li>
                            <li><strong>B∆∞·ªõc 5:</strong> Th·ª±c hi·ªán import</li>
                        </ul>
                        <p><strong>L∆∞u √Ω:</strong> S·ªë ti·ªÅn d∆∞∆°ng (+) s·∫Ω ƒë∆∞·ª£c t·∫°o th√†nh giao d·ªãch thu nh·∫≠p,
                           s·ªë ti·ªÅn √¢m (-) s·∫Ω th√†nh giao d·ªãch chi ph√≠.</p>
                    </div>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Import Wizard Action -->
    <record id="action_bank_transaction_import_wizard" model="ir.actions.act_window">
        <field name="name">Import Giao D·ªãch Ng√¢n H√†ng</field>
        <field name="res_model">dpt.bank.transaction.import.wizard</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
        <field name="view_id" ref="view_bank_transaction_import_wizard_form"/>
    </record>

</odoo>
